<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./asset/font/themify-icons-font/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="./asset/headerCss/header2.css">
    <link rel="stylesheet" href="./asset/mainContentCss/content2.css">
    <link rel="stylesheet" href="./asset/footerCSS/footer.css">
    <link rel="stylesheet" href="./asset/css/base.css">
    <title>trnag 2</title>
</head>
<body>
    <header>
       
        <div class="header-background ">
             <div class="header2-top flex ">
                <div class="header2-logo">
                    <img src="./asset/img/z4516660249925_988cfc07b7275f3fd53e5efba9c578d0-removebg-preview.png" alt="">
                </div>
                <div class="header2-nav">
                    <ul class="header2-nav__list flex">
                        <li class="header2-nav__item scale"><a href="#">Trang chủ</a></li>
                        <li class="header2-nav__item scale"><a href="#">Danh mục</a></li>
                        <li class="header2-nav__item scale"><a href="#">Giới thiệu</a></li>
                        <li class="header2-nav__item scale"><a href="#">Liên hệ</a></li>
                        <li class="header2-nav__item scale"><a href="#">chỉnh sửa</a></li>
                    </ul>
                </div>
                <div class="header2-logo">
                    <img src="./asset/img/z4516660261248_4ed5a8e53476cfe9b0e4f2a00897578b-removebg-preview.png" alt="">
                </div>
             </div> 
             <div class="header2-bottom">
                <div class="row60 center-col">
                    <div class="header2-title">
                        <h1>BÁO CÁO KHÓA LUẬN</h1>
                    </div>
                    
                    <div class="header2-search-box flex">
                        <input type="text" required class="header2-search">
                        <button class="header2-search-btn">
                            <i class="ti-search"></i>
                            
                        </button>
                    </div>
                </div>
             </div>
        </div> 
    </header>
    <main class="main">
        <div class="row90 flex margin-bottom">
            <div class="row-block center-col">
                <div class="content-block-header flex space-between">
                    <div class="content-block-header__title">
                        <h2>Mới Nhất</h2>
                    </div>
                    <div class="next-page-block flex space-between">
                        <div class="next-page-icon prev-btn">
                            <i class="ti-angle-left"></i>
                        </div>
                        <div class="next-page-icon next-btn">
                            <i class="ti-angle-right"></i>
                        </div>
                    </div>
                </div>
                <!-- --- -->
                <div class="essays-wrapper flex space-between">
                   <div class="slide flex space-between">
                        <div class="col-20 center-col margin-both-sides essay-block-item">
                            <div class="essay-block ">
                                <div class="essay-content">
                                    <img  src="./asset/img/luanVanimg.jpg" alt="">
                                </div>
                                <div title="" class="essay-leter center-col">
                                    <span><span>MSSV: </span>${essay.MSSV}</span>
                                    <span><span>Tên: </span>${essay.name}</span>
                                    <h3><span>Tên luận: </span>${essay.easayName}</h3>
                            
                            </div>
                        </div>
                   </div>
                </div>
                
                
                <!-- --- -->
            </div>

            
        </div>



    </main>



    <footer class="footer1">
        
        <div class="footer-info margin-both-side">
            <div class="row ">
                    <div class="info col-3 center-col">
                        <div class="info-wraper">
                            <div class="info-title">Các liên kết khác</div>
                        <ul class="info-list">
                            <li class="info-text scale">Thư viện</li>
                            <li class="info-text scale">Hệ thống thông tin sinh viên</li>
                            <li class="info-text scale">Hệ thống tác nghiệp</li>
                        </ul>
                        </div>
                    </div>
                    <div class="info col-3 center-col">
                        <div class="info-wraper center-col">
                            <div class="info-title">Kết nối</div>
                    <ul class="info-list center-row ">
                        <li class="info-item scale">
                            <i class="ti-facebook info-social-icon"></i>
                        </li>
                        <li class="info-item scale">
                            <i class="ti-youtube info-social-icon"></i>
                        </li>
                        <li class="info-item scale">
                            <i class="ti-twitter info-social-icon"></i>
                        </li>
                        <li class="info-item scale">
                            <i  class="ti-instagram info-social-icon"></i>
                        </li>
                        <li class="info-item scale">
                            <i class="ti-linkedin info-social-icon"></i>
                        
                        </li>
                    </ul> 
                        
                        </div>
                    </div>
                    <div class="info col-3 center-col">
                        <div class="info-wraper">
                            <div class="info-title">Các cơ sở </div>
                       <ul class="info-list">
                        <li class="info-item center-row scale">
                            <div class="loca-icon-wrapper">
                                <i class="ti-location-pin loca-icon"></i>
                            </div>
                            <a class="class-location" href="#"><span>Địa điểm 1:</span>97 Võ Văn Tần, P. Võ Thị Sáu, Q. 3, TP. HCM.</a>
                        </li>
                        <li class="info-item center-row scale">
                            <div class="loca-icon-wrapper">
                                <i class="ti-location-pin loca-icon"></i>
                            </div>
                            <a class="class-location" href="#"><span>Địa điểm 2:</span>35-37 Hồ Hảo Hớn, P. Cô Giang, Q. 1 , TP. HCM.</a>
                        </li>
                        <li class="info-item center-row scale">
                            <div class="loca-icon-wrapper">
                                <i class="ti-location-pin loca-icon"></i>
                            </div>
                            <a class="class-location" href="#"><span>Địa điểm 3:</span>371 Nguyễn Kiệm, P. 3, Q. Gò Vấp, TP. HCM.</a>
                        </li>
                        <li class="info-item center-row scale">
                            <div class="loca-icon-wrapper">
                                <i class="ti-location-pin loca-icon"></i>
                            </div>
                            <a class="class-location" href="#"><span>Địa điểm 4:</span>02 Mai Thị Lựu, P. Đa Kao, Q. 1, TP. HCM.</a>
                        </li>
                       </ul>
                        </div>
                    </div>
                </div>
                    
        </div>
        
    </footer>
    <footer class="footer2 margin-both-side">
        <div class="footer-contact">
            <div class="row">
                <div class="footer-logo col-20">
                    <img src="./asset/img/Logo (1).png" alt="" class="header__logo-img">
                </div>
                <div class="footer-contact-info col-80 ">
                    <p class="contact-info">Địa chỉ: 35 – 37 Hồ Hảo Hớn, Phường Cô Giang, Quận 1, TP. HCM.</p>
                    <p class="contact-info">Điện thoại: <a href="#">028-38364748</a>.</p>
                    <p class="contact-info">Fax: <a href="#">028-39207639</a> hoặc <a href="#">028-39207640</a>.</p>
                    <p class="contact-info">E-mail: <a href="#">ou@ou.edu.vn</a>.</p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);

        
        const sliderWrapper = $('.slide');
        const nextPageBtn = $('.next-page-icon.next-btn');
        const prevPageBtn = $('.next-page-icon.prev-btn');
        const essayblock = $('.essay-block-item');
        const essayblockwidth = essayblock.offsetWidth;
        const inputBlock = $('.header2-search');
        
       
        
        let positionX = 0;
        


        const mainPage = {
            listEasay: localStorage.getItem("list-easay") ? JSON.parse(localStorage.getItem("list-easay")) : [],
            render: function() {
                const htmls = this.listEasay.map(function(essay,index) {
                    return `
                        <div class="col-20 center-col margin-both-sides essay-block-item">
                            <div class="essay-block ">
                                <div class="essay-content">
                                    <img src="./asset/img/luanVanimg.jpg" alt="">
                                </div>
                                <div title="${essay.easayName}" class="essay-leter center-col">
                                    <span><span>MSSV: </span>${essay.MSSV}</span>
                                    <span><span>Tên: </span>${essay.name}</span>
                                    <h3><span>Tên luận: </span>${essay.easayName}</h3>
                                </div>
                            
                            </div>
                        </div>
                        `
                })
                sliderWrapper.innerHTML = htmls.join(' ');
            },
            // Hàm Loại Bỏ Dấu Tìm Trên GITHUP =================================================================
            removeVietnameseTones: function(str) {
                str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"); 
                str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"); 
                str = str.replace(/ì|í|ị|ỉ|ĩ/g,"i"); 
                str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"); 
                str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"); 
                str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"); 
                str = str.replace(/đ/g,"d"); 
                str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, "A");
                str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, "E");
                str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, "I");
                str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, "O");
                str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, "U");
                str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, "Y");
                str = str.replace(/Đ/g, "D");
                // Some system encode vietnamese combining accent as individual utf-8 characters
                // Một vài bộ encode coi các dấu mũ, dấu chữ như một kí tự riêng biệt nên thêm hai dòng này
                str = str.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g, ""); // ̀ ́ ̃ ̉ ̣  huyền, sắc, ngã, hỏi, nặng
                str = str.replace(/\u02C6|\u0306|\u031B/g, ""); // ˆ ̆ ̛  Â, Ê, Ă, Ơ, Ư
                // Remove extra spaces
                // Bỏ các khoảng trắng liền nhau
                str = str.replace(/ + /g," ");
                str = str.trim();
                // Remove punctuations
                // Bỏ dấu câu, kí tự đặc biệt
                str = str.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," ");
                return str;
            },
            
            
            searching: function(inputValue) {
                const _this = this;
                let essayWrappers = $$('.essay-block');
                
                for (let index = 0; index < essayWrappers.length; index++) {
                    let essayWrapper = essayWrappers[index];
                    let essayName = essayWrapper.querySelector('h3').innerText;
                    
                    if (_this.removeVietnameseTones(essayName.toUpperCase()).includes(_this.removeVietnameseTones(inputValue.toUpperCase()))) {
                        positionX = 0;
                        sliderWrapper.style = `transform: translateX(0px);`;
                        if ((index + 1) > essayWrappers.length) {
                            positionX = -(essayblockwidth + 74) * (essayWrappers.length - 4);
                            sliderWrapper.style = `transform: translateX(${positionX}px);`;
                        }else  {
                            
                                positionX = -(essayblockwidth + 74) * (index -1) ;
                            
                            
                            sliderWrapper.style = `transform: translateX(${positionX}px);`;
                        }
                        if(inputValue ==='') {
                            positionX = 0;
                            sliderWrapper.style = `transform: translateX(0px);`;
                        }
                    
                        break; 
                    }
                }
                
                    for (let index = 0; index < essayWrappers.length; index++) {
                        let essayWrapper = essayWrappers[index];
                        let essayName = essayWrapper.querySelector('h3').innerText;
                        if (_this.removeVietnameseTones(essayName.toUpperCase()).includes(_this.removeVietnameseTones(inputValue.toUpperCase()))) {
                            setTimeout(function(){
                                essayWrappers[index].parentElement.classList.remove('searched');
                            },3000)
                            essayWrappers[index].parentElement.classList.add('searched');
                        }
                    }
                
            },


            eventHandler: function() {
                const _this = this;
                // xử lí chuyển trang
                nextPageBtn.onclick = function() {
                    
                    
                    if(positionX <= -essayblockwidth*(_this.listEasay.length-3)) {
                        positionX = 0;
                    } else {
                        positionX = positionX - essayblockwidth -74;
                    }
                    sliderWrapper.style = `transform: translateX(${positionX}px);`;
                };
                prevPageBtn.onclick = function() {
                    if(positionX >= 0) {
                        positionX=0;
                    }
                    else {

                        positionX = positionX + essayblockwidth+74 ;
                    }
                   
                    sliderWrapper.style = `transform: translateX(${positionX}px);`;
                };
                inputBlock.oninput = function() {
                    console.log(inputBlock.value);
                    _this.searching(inputBlock.value);
                }

            },
             


            start: function () {
                this.render()
                this.eventHandler();
                
            }
        }

        mainPage.start();
        
    </script>
   
    
</body>
</html>